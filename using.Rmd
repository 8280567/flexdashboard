---
title: "Using flexdashboard"
output:
  html_document:
    toc: true
    toc_depth: 3
    toc_float:
      collapsed: false
---

## Components

A wide variety of components can be included in flexdashboard layouts, including:

1. Interactive JavaScript data visualizations based on [htmlwidgets](http://www.htmlwidgets.org). 

2. R graphical output including base, lattice, and grid graphics. 

3. Tabular data (with optional sorting, filtering, and paging).

4. Value boxes for highlighting important summary data. 

5. Text annotations of various kinds.

The [Components](components.html) page describes the use of each component type in more detail.

## Layout 

### Orientation

#### Layout by Column

By default, level 2 markdown headers (`------------------`) within dashboards define columns, with individual charts stacked vertically within each column. Here's the definition of a two column dashboard with one chart on the left and two on the right:

<div class="row">

<div class="col-md-6">
<div id="columnorientation"></div>
<script type="text/javascript">loadSnippet('columnorientation')</script>
</div>

<div class="col-md-6 nopadding">
<div height="422px" width="100%">
<div style="float: left; width: 50%;">
<img class="holder" src="holder.js/100px422?size=28&amp;text=Chart 1">
</div>
<div style="margin-left: 50%;">
<img class="holder" src="holder.js/100px211?size=28&amp;text=Chart 2">
<img class="holder" src="holder.js/100px211?size=28&amp;text=Chart 3">
</div>
</div>
</div>

</div>

#### Layout by Row

You can also choose to orient dashboards row-wise rather than column-wise, by specifying the `orientation: rows` option. For example, this layout defines two rows, the first of which has a single chart and the second of which has two charts:

<div class="row">

<div class="col-md-6">
<div id="roworientation"></div>
<script type="text/javascript">loadSnippet('roworientation')</script>
</div>

<div class="col-md-6 nopadding">
<div height="454px" width="100%">
<img class="holder" src="holder.js/100px227?size=28&amp;text=Chart 1">
<div>
<div style="float: left; width: 50%;">
<img class="holder" src="holder.js/100px227?size=28&amp;text=Chart 2">
</div>
<div style="margin-left: 50%;">
<img class="holder" src="holder.js/100px227?size=28&amp;text=Chart 3">
</div>
</div>
</div>
</div>

</div>

### Fill vs. Scrolling

By default flexdashboard charts are laid out to automatically fill the height of the browser. This works well for a small number of vertically stacked charts, however if you have lots of charts you'll probably want to scroll rather than fit them all onto the page. You can control this behavior using the `vertical_layout` option. Specify `fill` to vertically re-size charts so they completely fill the page and `scroll` to layout charts at their natural height, scrolling the page if necessary.

For example, the following layout includes 3 charts and requests that the page scroll as necessary to accommodate their natural height:

<div class="row">

<div class="col-md-6">
<div id="chartstack-scrolling"></div>
<script type="text/javascript">loadSnippet('chartstack-scrolling')</script>
</div>

<div class="col-md-6 nopadding">
<div height="406px" width="100%">
<img class="holder" src="holder.js/100px135?size=28&amp;text=Chart 1">
<img class="holder" src="holder.js/100px135?size=28&amp;text=Chart 2">
<img class="holder" src="holder.js/100px135?size=28&amp;text=Chart 3">
</div>
</div>

</div>


## Chart Sizing

To create an ideal layout for your dashboard, it's important to understand how the size of individual charts is determined. This section describes the layout algorithm and the various ways you can tweak its behavior.

### Width and Height

The width of charts in flexdashboard is ultimately determined by the width of the browser. If your layout has a single column then charts will occupy the full width of the browser. If your layout has multiple columns then the columns will split the available width evenly (unless overridden via the `data-width` attribute as described below).

The height of charts is determined in one of two ways depending on whether your dashboard is configured to fit itself into the vertical confines of the page (`vertical_layout: fill`) or to scroll (`vertical_layout: scroll`):

1. For dashboards that fill the page the height of charts will be determined by the height of the browser, with vertically stacked charts splitting the available height evenly (unless overridden via the `data-height` attribute as described below).

2. For scrolling dashboards, the height of charts will be determined by the knitr `fig.height` option, which defaults to 5 inches (480 pixels).

### Size Attributes

The nature of the charts within your dashboard (desired emphasis, visualization types, etc.) will often dictate that you'll want to change the default sizing behavior. If no size attributes are specified then the relative size of each chart will be determined by it's knitr figure size (this is 6x5 inches or 576x480 pixels by default).

You can modify the default sizing behavior by applying the `data-width` and `data-height` attributes to rows, columns, or even individual charts. These attributes establish the relative size between charts laid out in the same dimension (horizontal or vertical).

#### Examples

This example use the `data-height` attribute to dictate a larger vertical size for the first row, resulting in a layout that more clearly emphasizes the first chart.

<div class="row">
<div class="col-md-6">
<div id="chartsizing"></div>
<script type="text/javascript">loadSnippet('chartsizing')</script>
</div>

<div class="col-md-6 nopadding">
<div height="454px" width="100%">
<img class="holder" src="holder.js/100px286?size=28&amp;text=Chart 1">
<div>
<div style="float: left; width: 50%;">
<img class="holder" src="holder.js/100px168?size=28&amp;text=Chart 2">
</div>
<div style="margin-left: 50%;">
<img class="holder" src="holder.js/100px168?size=28&amp;text=Chart 3">
</div>
</div>
</div>
</div>

</div>


This example is a variation of the single-column layout demonstrated above with a `data-height` attribute applied to the first chart:

<div class="row">
<div class="col-md-6">
<div id="chartdataheight"></div>
<script type="text/javascript">loadSnippet('chartdataheight')</script>
</div>

<div class="col-md-6 nopadding">
<div height="360px" width="100%">
<img class="holder" src="holder.js/100px173?size=28&amp;text=Chart 1">
<img class="holder" src="holder.js/100px100?size=28&amp;text=Chart 2">
<img class="holder" src="holder.js/100px100?size=28&amp;text=Chart 3">
</div>
</div>

</div>

#### Chart Padding

By default flexdashboard places 8 pixels of padding around the edges of charts. For some chart types this might not be ideal. In this case you can either add the `.nopadding` attribute to specify no padding at all or the `data-padding` attribute to specify a specific number of pixels. For example:

<div id="chartpadding"></div>
<script type="text/javascript">loadSnippet('chartpadding')</script>

### Flexbox Layout

Dashboard layout is done using the browser [flexbox](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Using_CSS_flexible_boxes) engine, which alters its items' width and/or height to best fill the available space on any display device. A flexbox layout expands items to fill available free space, or shrinks them to prevent overflow.

The implication of this is that chart dimensions established via either knitr figure sizes or `data-width` and `data-height` attributes are used to establish relative sizes between charts within the same horizontal or vertical dimension as opposed to absolute sizes (this corresponds to the `flex-grow` and `flex-shrink` CSS properties).


## Multiple Pages

If you have more than a handful of charts you'd like to include in a dashboard, you may want to consider dividing the dashboard into multiple pages. To define a page just use a level 1 markdown header (`==================`). Each page you define will have its own top-level navigation tab.

For example, this code creates a dashboard with two pages, each containing two charts:

<div id="multiplepages"></div>
<script type="text/javascript">loadSnippet('multiplepages')</script>

### Page Orientation

Note that in this example both pages use the default "columns" orientation. It is however possible to specify a distinct orientation for an individual page. This is done by adding the `data-orientation` attribute to the header of the page you want to change the orientation of. For example:

<div id="pageorientation"></div>
<script type="text/javascript">loadSnippet('pageorientation')</script>

### Page Navigation 

By default each page you define is given it's own top level tab on the navigation bar. However, if you have a large number of pages (more than 5) you might want to organize your pages into menus on the navigation bar. 

To specify that a page should be accessed via a navigation bar menu you use the `data-navmenu` attribute. For example, the following dashboard has 4 pages, 2 of which are located on "Menu A" and two of which are located on "Menu B":

<div id="pagenavmenu"></div>
<script type="text/javascript">loadSnippet('pagenavmenu')</script>


### Page Icons

You can add an icon to the navigation menu for a page using the `data-icon` attribute. For example, the following specifies a navigation bar icon for each of two pages:

<div id="pageicons"></div>
<script type="text/javascript">loadSnippet('pageicons')</script>

You can specify icons for navigation bar items from three different icon sets:

1. [Font Awesome](https://fortawesome.github.io/Font-Awesome/icons/)

2. [Ionicons](http://ionicons.com/)

3. [Bootstrap Glyphicons](https://getbootstrap.com/components/#glyphicons)

When referring to an icon you should use it's full name including the icon set prefix (e.g. "fa-github", "ion-social-twitter", "glyphicon-time", etc.).

## Shiny

By adding [Shiny](http://shiny.rstudio.com) to a flexdashboard, you can create dashboards that enable viewers to change underlying parameters and see the results immediately, or that update themselves incrementally as their underlying data changes (see [`reactiveFileReader`](http://shiny.rstudio.com/reference/shiny/latest/reactiveFileReader.html) and [`reactivePoll`](http://shiny.rstudio.com/reference/shiny/latest/reactivePoll.html)). This is done by adding `runtime: shiny` to a standard flexdashboard and then adding one or more input controls and/or reactive expressions that dynamically drive the appearance of the charts within the dashboard.

Using Shiny with flexdashboard turns a static R Markdown report into an [Interative Document](http://rmarkdown.rstudio.com/authoring_shiny.html). It's important to note that interactive documents need to be [deployed](http://rmarkdown.rstudio.com/authoring_shiny.html#deployment) to a Shiny Server to be shared broadly (whereas static R Markdown documents are standalone web pages that can be attached to emails or served from any standard web server).

Note that the [shinydashboard](https://rstudio.github.io/shinydashboard/) package provides another way to create dashboards with Shiny.  

### Requirements

The steps required to add Shiny components to a flexdashboard are as follows:

1. Add `runtime: shiny` to the options declared at the top of the document (YAML front matter).

2. Add the `{.sidebar}` attribute to the first column of the dashboard to make it a host for Shiny input controls (note this step isn't strictly required, but most Shiny based dashboards will want to do this).

3. Add Shiny inputs and output as appropriate.

4. When including plots, be sure to wrap them in a call to [renderPlot](http://shiny.rstudio.com/reference/shiny/latest/renderPlot.html). This is important not only for dynamically responding to changes but also to ensure that they are automatically re-sized when their container changes.

A simple example of a Shiny based flexdashboard is provided below.

### Examples

The following example demonstrates the basics of using Shiny within a flexdashboard:

<img src="images/ShinyDygraphs.png" width="865" height="745"/>

#### Source Code

Here's the source code for the example:

<div id="shinycode"></div>
<script type="text/javascript">loadSnippet('shinycode')</script>

The first column ("Inputs") includes the `{.sidebar}` attribute and the Shiny input controls; the second column ("Outputs") includes the Shiny code required to render the chart based on the inputs.

#### More Examples

Several additional examples of Shiny based flexdashboards are available (all include links to their source code):

1. [Iris K-Means Clustering](https://jjallaire.shinyapps.io/shiny-kmeans/)
2. [Linked Brushing with ggplot2](https://jjallaire.shinyapps.io/shiny-ggplot2-brushing/)
3. [CRAN Download Monitor](https://jjallaire.shinyapps.io/shiny-crandash/) 
4. [Gene Expression Biclustering ](https://jjallaire.shinyapps.io/shiny-biclust/)

### Input Sidebar

The `{.sidebar}` attribute is a special designation indicating that a column should be laid out flush to the left with a fixed width of 250 pixels and a special background color. Sidebars are not required for flexdashboards using `runtime: shiny`, but they are often useful for presenting inputs.

Sidebars always appear on the left no matter where they are defined within the flow of the document. You can alter the default width of the sidebar using the `data-width` attribute. For example:

<div id="sidebarwidth"></div>
<script type="text/javascript">loadSnippet('sidebarwidth')</script>

#### Global Sidebar

If you are creating a flexdashboard with [Multiple Pages](using.html#multiple-pages) you may want to use a single sidebar that applies across all pages. In this case you should define the sidebar using a level 1 markdown header (the same as is used to define pages).  

For example, this dashboard includes a global sidebar:

<div id="sidebarmultiplepages"></div>
<script type="text/javascript">loadSnippet('sidebarmultiplepages')</script>

### Learning More

To learn more about using Shiny with flexdashboard see the following resources:

1. The [Introduction to Interactive Documents](http://shiny.rstudio.com/articles/interactive-docs.html) article provides a great resources for getting started with Shiny and R Markdown.

1. The [Interactive Documents](http://rmarkdown.rstudio.com/authoring_shiny.html) article on the R Markdown web site provides additional introductory material as well as information on deploying interactive documents.

2. The [Shiny Dev Center](http://shiny.rstudio.com) includes extensive articles, tutorials, and examples to help you learn more about Shiny.

## Themes

A variety of themes are available to modify the appearance of flexdashboard. Supported themes include "default", "bootstrap", "cerulean", "journal", "flatly", "readable", "spacelab", "united", "cosmo", "lumen", "paper", "sandstone", "simplex", and "yeti". Note that the "cosmo" theme is used when "default" is specified.

These themes are all based on the themes available in the [R Markdown](http://rmarkdown.rstudio.com) package (which are in turn based on [Bootswatch](https://bootswatch.com/) themes).

Use the `theme` option to specify an alternate theme:

<div id="themesexample"></div>
<script type="text/javascript">loadSnippet('themesexample')</script>

If you are looking for a theme that embeds well inside another content frame (e.g. one that doesn't use such a strong color for the navigation bar) then the "bootstrap" theme is a good choice. 

#### Custom Colors

You can use CSS to customize the colors used within the navigation bar of each theme. If you do this, realize that themes define colors for many elements and states, so you should be careful to override all of the required elements. 

The navigation bar for flexdashboard uses the `navbar-inverse` class for each of its themes. Here is the `navabar-inverse` CSS for the default "cosmo" theme used by flexdashboard:

https://github.com/thomaspark/bootswatch/blob/v3.3.5/cosmo/bootstrap.css#L4643-L4744

If you want to customize these colors you should create a CSS stylesheet with the requisite `navbar-inverse` entries and include it using the `css` option of the `flex_dashboard` format.

## Learning More

The [Components](components.html) page describes how to include various types of components with flexdashboard including htmlwidgets, R graphics, tabular data, value boxes, text annotations, and navigation bar links.

The [Layouts](layouts.html) page includes a variety of sample layouts which you can use as a starting point for your own dashboards.

The [Examples](examples.html) page includes several examples of flexdashboard in action (including links to source code if you want to dig into how each example was created).

